<div class="vaarn-character">

  <div class="bio">
    <label>Name:</label><input type="text" name="attr_name"/><br>

    <label>Ancestry:</label>
    <select type="text" name="attr_ancestry">
      <option value="truekin">True-Kin</option>
      <option value="synth">Synth</option>
      <option value="newbeast">Newbeast</option>
      <option value="mycomorph">Mycomorph</option>
      <option value="cacogen">Cacogen</option>
    </select><br>

    <textarea name="attr_specialrules" readonly></textarea><br>

    <label>Bio:        <textarea name="attr_bio" rows=3></textarea></label>

    <label>hp_cur:       <input type="number" hp_cur="attr_hp_cur"/></label>
    <label>hp_max:       <input type="number" hp_max="attr_hp_max"/></label>
    <label>level:       <input type="number" level="attr_level"/></label>
    <label>xp:       <input type="number" xp="attr_xp"/></label>
  </div>

  <div class="vaarn-stats">
    <div class="stat">
      <label>STR</label>
      <label>def:        <input type="number" name="attr_str_def"/></label>
      <label>bonus:      <input type="number" name="attr_str_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_str_cybernetic"/></label>
    </div>

    <div class="stat">
      <label>DEX</label>
      <label>def:        <input type="number" name="attr_dex_def"/></label>
      <label>bonus:      <input type="number" name="attr_dex_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_dex_cybernetic"/></label>
    </div>

    <div class="stat">
      <label>CON</label>
      <label>def:        <input type="number" name="attr_con_def"/></label>
      <label>bonus:      <input type="number" name="attr_con_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_con_cybernetic"/></label>
    </div>

    <div class="stat">
      <label>INT</label>
      <label>def:        <input type="number" name="attr_int_def"/></label>
      <label>bonus:      <input type="number" name="attr_int_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_int_cybernetic"/></label>
    </div>

    <div class="stat">
      <label>PSY</label>
      <label>def:        <input type="number" name="attr_psy_def"/></label>
      <label>bonus:      <input type="number" name="attr_psy_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_psy_cybernetic"/></label>
    </div>

    <div class="stat">
      <label>EGO</label>
      <label>def:        <input type="number" name="attr_ego_def"/></label>
      <label>bonus:      <input type="number" name="attr_ego_bonus"/></label>
      <label>cybernetic: <input type="text" name="attr_ego_cybernetic"/></label>
    </div>
  </div>

  <div class="vaarn-gear">
    Gear
  </div>
</div>


<script type="text/worker">
  let specialrules_map = {
    "truekin": "truekin rules",
    "synth": "synth rules",
    "newbeast": "newbeast rules",
    "mycomorph": "mycomorph rules",
    "cacogen": "cacogen rules",
  };

  on("change:ancestry sheet:opened", function() {
    getAttrs(["ancestry"], function(values) {
      let ancestry = values.ancestry;
      let specialrules = specialrules_map[ancestry];
      setAttrs({
        "specialrules": specialrules
      });
    });
  });
</script>
