<div class="vaarn-character">

  <div class="basics">
    <label>NAME:</label><input type="text" name="attr_name"/><br/>

    <label>ANCESTRY:</label>
    <select type="text" name="attr_ancestry">
      <option value="truekin">True-Kin</option>
      <option value="synth">Synth</option>
      <option value="newbeast">Newbeast</option>
      <option value="mycomorph">Mycomorph</option>
      <option value="cacogen">Cacogen</option>
    </select><br/>

    <div class="sheet-auto-expand">
      <span name="attr_specialrules"></span>
      <textarea spellcheck="false" name="attr_specialrules"></textarea>
    </div>
  </div>
  
  <div class="bio">
    <label>HP:</label><input type="number" hp_cur="attr_hp_cur"/>
    <span class="spacer">&nbsp;</span>
    <label>XP:</label><input type="number" xp="attr_xp"/>
    <br/>

    <label>MAX:</label><input type="number" hp_max="attr_hp_max"/>
    <span class="spacer">&nbsp;</span>
    <label>LEVEL:</label><input type="number" level="attr_level"/>
    <br/>

    <div class="sheet-auto-expand">
      <span name="attr_bio"></span>
      <textarea spellcheck="false" name="attr_bio"></textarea>
    </div>
  </div>

  <div class="clear"></div>

  <div class="labels">
    <label>&nbsp;</label></br>
    <label>DEF</label></br>
    <label>BONUS</label></br>
    <label class="small">CYBERNETIC</label>
  </div>

  <div class="stat">
    <label>STR</label><br/>
    <input type="number" min="3" max="20" name="attr_str_def"/><br/>
    <input type="number" min="1" max="10" name="attr_str_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_str_cybernetic"></span>
      <textarea spellcheck="false" name="attr_str_cybernetic"></textarea>
    </div>
  </div>

  <div class="stat">
    <label>DEX</label><br/>
    <input type="number" min="3" max="20" name="attr_dex_def"/><br/>
    <input type="number" min="1" max="10" name="attr_dex_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_dex_cybernetic"></span>
      <textarea spellcheck="false" name="attr_dex_cybernetic"></textarea>
    </div>
  </div>

  <div class="stat">
    <label>CON</label><br/>
    <input type="number" min="3" max="20" name="attr_con_def"/><br/>
    <input type="number" min="1" max="10" name="attr_con_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_con_cybernetic"></span>
      <textarea spellcheck="false" name="attr_con_cybernetic"></textarea>
    </div>
  </div>

  <div class="stat">
    <label>INT</label><br/>
    <input type="number" min="3" max="20" name="attr_int_def"/><br/>
    <input type="number" min="1" max="10" name="attr_int_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_int_cybernetic"></span>
      <textarea spellcheck="false" name="attr_int_cybernetic"></textarea>
    </div>
  </div>

  <div class="stat">
    <label>PSY</label><br/>
    <input type="number" min="3" max="20" name="attr_psy_def"/><br/>
    <input type="number" min="1" max="10" name="attr_psy_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_psy_cybernetic"></span>
      <textarea spellcheck="false" name="attr_psy_cybernetic"></textarea>
    </div>
  </div>

  <div class="stat">
    <label>EGO</label><br/>
    <input type="number" min="3" max="20" name="attr_ego_def"/><br/>
    <input type="number" min="1" max="10" name="attr_ego_bonus"/><br/>
    <div class="sheet-auto-expand">
      <span name="attr_ego_cybernetic"></span>
      <textarea spellcheck="false" name="attr_ego_cybernetic"></textarea>
    </div>
  </div>

  <div class="clear"></div>

  <div class="vaarn-gear">
    <label>GEAR</label>
  </div>
</div>


<script type="text/worker">
  let specialrules_map = {
    "truekin": "truekin rules",
    "synth": "synth rules",
    "newbeast": "newbeast rules",
    "mycomorph": "mycomorph rules",
    "cacogen": "cacogen rules",
  };

  on("change:ancestry sheet:opened", function() {
    getAttrs(["ancestry"], function(values) {
      let ancestry = values.ancestry;
      let specialrules = specialrules_map[ancestry];
      setAttrs({
        "specialrules": specialrules
      });
    });
  });
</script>
